# TeamWiki - Software Requirements Specification

## 1. 프로젝트 개요

팀을 위한 AI 기반 지식 관리 시스템

**목적:**
- 팀의 모든 지식을 한곳에 체계적으로 정리
- 실시간 협업으로 문서 작성
- AI가 자동으로 정리하고 추천
- Notion/Confluence 대체

**슬로건:**
"팀의 모든 지식을 AI가 정리"

**타겟 사용자:**
- 스타트업 팀 (5-50명)
- 개발팀
- 기획/마케팅팀
- 원격 근무 팀
- 프리랜서 그룹

## 2. 핵심 기능 (20 Features)

### 📝 문서 관리 (Feature 1-5)

#### Feature 1: 마크다운 에디터
```
- 리치 텍스트 편집
- 마크다운 지원 (# ** `` 등)
- 헤딩/리스트/테이블/코드블록
- 이미지 업로드 (드래그앤드롭)
- 키보드 단축키 (Cmd+B, Cmd+K 등)
- 자동 저장
```

#### Feature 2: 실시간 협업 편집
```
- 여러 명이 동시 편집
- 다른 사용자 커서 표시
- 실시간 동기화
- 충돌 방지
- "누가 지금 보고 있음" 표시
```

#### Feature 3: 버전 히스토리
```
- 모든 수정 기록 저장
- 타임라인 뷰
- 버전간 비교 (diff)
- 이전 버전 복원
- 누가 언제 수정했는지
```

#### Feature 4: 문서 템플릿
```
템플릿 종류:
- 📝 회의록 (날짜/참석자/안건/결정사항)
- 📋 PRD (Product Requirements Document)
- 🏗️ 기술 설계서
- 📊 주간 보고서
- 🎯 OKR
- 📖 온보딩 가이드
- 🐛 버그 리포트
- 빈 문서

사용자 정의 템플릿 저장 가능
```

#### Feature 5: 문서간 링크 (백링크)
```
- [[문서 제목]] 으로 링크
- 자동완성
- 백링크 표시 ("이 문서를 참조하는 문서")
- 링크 그래프 시각화 (선택)
- 깨진 링크 감지
```

---

### 🔍 검색 & AI (Feature 6-10)

#### Feature 6: 전체 문서 검색
```
- 제목/내용 전체 검색
- 실시간 검색 결과
- 필터:
  - 작성자
  - 날짜 범위
  - 카테고리/태그
  - 즐겨찾기만
- 검색 하이라이트
- 최근 검색 기록
```

#### Feature 7: AI 자동 태깅
```
- 문서 저장 시 자동으로 태그 추천
- 내용 분석해서 적절한 태그 생성
- 기존 태그 활용
- 수동 태그도 가능
- 태그 클라우드
```

#### Feature 8: AI 문서 요약
```
- 긴 문서 자동 요약 (3줄)
- 핵심 포인트 추출
- TL;DR 생성
- 목차 자동 생성
- 요약 버튼 클릭 시 생성
```

#### Feature 9: 유사 문서 추천
```
- "이 문서를 본 사람은 이것도 봤어요"
- 내용 기반 유사도
- 같은 태그 문서
- 같은 작성자 문서
- 사이드바에 표시
```

#### Feature 10: AI Q&A (팀 지식 기반)
```
- "팀에게 질문하기" 기능
- 예: "배포 프로세스가 어떻게 되나요?"
- 전체 문서 검색해서 답변
- 참고 문서 링크 제공
- 답변 없으면 "관련 문서 없음" 표시
```

---

### 👥 협업 (Feature 11-15)

#### Feature 11: 댓글/멘션
```
- 문서 어디든 댓글
- @멘션으로 특정 사용자 호출
- 댓글 스레드
- 댓글 해결/재오픈
- 댓글 알림
```

#### Feature 12: 문서 공유
```
공유 레벨:
- 팀 전체 (기본)
- 특정 멤버만
- 링크 있는 사람 누구나 (읽기 전용)
- 비공개 (나만)

공유 링크:
- 고유 URL 생성
- 비밀번호 설정 (선택)
- 만료일 설정 (선택)
```

#### Feature 13: 권한 관리
```
역할:
- 👑 Owner (모든 권한)
- 🔧 Admin (멤버 관리, 설정)
- ✍️ Editor (문서 생성/수정)
- 👀 Viewer (읽기만)

문서별 권한:
- 편집 가능
- 댓글만 가능
- 읽기 전용
```

#### Feature 14: 알림
```
알림 종류:
- 멘션됨
- 댓글 달림
- 문서 공유됨
- 중요 업데이트

알림 채널:
- 인앱 (벨 아이콘)
- 이메일 (선택)
- Slack (연동 시)

알림 설정:
- 즉시
- 일일 요약
- 끄기
```

#### Feature 15: 활동 피드
```
- 최근 활동 타임라인
- "누가 무엇을 했는지"
- 필터 (내가 쓴 것만/팀 전체)
- 실시간 업데이트
- 활동 타입:
  - 문서 생성
  - 문서 수정
  - 댓글
  - 공유
```

---

### 📊 구조화 (Feature 16-18)

#### Feature 16: 폴더/카테고리
```
구조:
- 워크스페이스 (팀)
  └─ 폴더 (예: "개발팀", "마케팅")
      └─ 하위 폴더
          └─ 문서

기능:
- 폴더 생성/이름변경/삭제
- 드래그앤드롭으로 이동
- 폴더 공유 (하위 문서 모두)
- 폴더 아이콘/색상 커스터마이징
```

#### Feature 17: 태그 시스템
```
- #태그명
- 문서에 여러 태그 가능
- 태그별 문서 모아보기
- 태그 색상 지정
- 인기 태그 TOP 10
- 태그 검색
- 태그 머지 (중복 제거)
```

#### Feature 18: 즐겨찾기
```
- ⭐ 버튼으로 즐겨찾기 추가
- 사이드바 상단에 표시
- 드래그로 순서 변경
- 폴더도 즐겨찾기 가능
- 최대 20개
```

---

### 🎨 커스터마이징 (Feature 19-20)

#### Feature 19: 팀 브랜딩
```
- 팀 이름
- 팀 로고 업로드
- 브랜드 컬러 (Primary/Secondary)
- 커스텀 도메인 (선택)
- 팀 설명
```

#### Feature 20: 다크/라이트 모드
```
- 시스템 설정 따르기
- 라이트 모드
- 다크 모드
- 자동 전환 (시간대별)
```

---

## 3. 사용자 스토리

### Story 1: 신입 개발자 온보딩
```
상황: 김신입 개발자 첫 출근

1. 팀장이 초대 링크 전송
2. 회원가입 (이메일/비밀번호)
3. 워크스페이스 입장
4. 왼쪽 사이드바에 "📖 온보딩 가이드" 문서 보임
5. 클릭해서 읽기
   - 팀 소개
   - 개발 환경 세팅
   - 코딩 컨벤션
   - 배포 프로세스
6. 궁금한 점 → AI Q&A에 질문
   "배포는 어떻게 하나요?"
7. 답변 + 관련 문서 링크 제공
8. 문서에 댓글로 질문
9. 시니어가 @멘션으로 답변
10. 온보딩 완료!
```

### Story 2: 팀 회의록 작성
```
상황: 주간 팀 미팅 후

1. [+ 새 문서] 클릭
2. 템플릿 선택: "📝 회의록"
3. 자동으로 구조 생성:
   - 날짜: 2024-01-30
   - 참석자: (입력)
   - 안건: (입력)
   - 결정사항: (입력)
   - 액션 아이템: (입력)
4. 실시간 협업으로 다 같이 작성
5. 액션 아이템에 @멘션으로 담당자 지정
6. 저장 → AI가 자동 태그 추천
   "#회의록 #주간미팅 #개발팀"
7. 폴더에 정리: "개발팀/회의록/2024"
8. Slack 알림 자동 전송
```

### Story 3: 문서 검색 & 재사용
```
상황: API 명세서 찾기

1. Cmd+K (빠른 검색)
2. "API 명세" 입력
3. 실시간 결과:
   - "결제 API 명세서"
   - "사용자 API 문서"
   - "인증 API 가이드"
4. "결제 API 명세서" 클릭
5. 읽다가 유사 문서 추천 보임
   - "PG사 연동 가이드"
   - "결제 테스트 시나리오"
6. 백링크 확인
   - "이커머스 개발 가이드"에서 참조 중
7. 필요한 부분 복사해서 새 문서 작성
```

---

## 4. 기술 요구사항

### 필수:
- Next.js 16 (App Router)
- TypeScript
- PostgreSQL + Drizzle ORM
- Tiptap (에디터) 또는 Lexical
- OpenRouter API (AI 기능)
- Supabase 또는 Pusher (실시간 동기화)
- Tailwind CSS + shadcn/ui
- NextAuth.js (인증)

### 선택:
- Uploadthing (파일 업로드)
- Resend (이메일 알림)
- Slack API (Slack 연동)
- React Beautiful DnD (드래그앤드롭)

---

## 5. 데이터베이스 스키마

### 핵심 테이블:

```sql
-- 워크스페이스
workspaces
  - id
  - name
  - logo_url
  - primary_color
  - created_at

-- 사용자
users
  - id
  - email
  - name
  - avatar_url
  - created_at

-- 워크스페이스 멤버
workspace_members
  - id
  - workspace_id
  - user_id
  - role (owner/admin/editor/viewer)
  - joined_at

-- 폴더
folders
  - id
  - workspace_id
  - parent_folder_id (nullable)
  - name
  - icon
  - color
  - created_by
  - created_at

-- 문서
documents
  - id
  - workspace_id
  - folder_id (nullable)
  - title
  - content (JSON)
  - created_by
  - updated_by
  - created_at
  - updated_at

-- 문서 버전
document_versions
  - id
  - document_id
  - content (JSON)
  - created_by
  - created_at

-- 태그
tags
  - id
  - workspace_id
  - name
  - color

-- 문서-태그 관계
document_tags
  - document_id
  - tag_id

-- 댓글
comments
  - id
  - document_id
  - user_id
  - content
  - parent_comment_id (nullable, for threads)
  - resolved
  - created_at

-- 즐겨찾기
favorites
  - id
  - user_id
  - document_id
  - folder_id (nullable)
  - order
  - created_at

-- 공유 링크
share_links
  - id
  - document_id
  - token
  - password (nullable)
  - expires_at (nullable)
  - created_by
  - created_at

-- 활동 로그
activities
  - id
  - workspace_id
  - user_id
  - action (created/updated/commented/shared)
  - target_type (document/folder/comment)
  - target_id
  - created_at
```

---

## 6. UI/UX 설계

### 메인 레이아웃:
```
┌─────────────────────────────────────────────────────┐
│  🏠 TeamWiki                    [+] 🔍  🔔  👤     │
├──────────┬──────────────────────────────────────────┤
│          │                                          │
│ 사이드바 │              문서 뷰                     │
│          │                                          │
│ ⭐ 즐겨찾기│  ┌────────────────────────────────┐   │
│  - 온보딩 │  │  # 문서 제목                   │   │
│  - API   │  │  by 홍길동 · 2일 전            │   │
│          │  │                                │   │
│ 📁 폴더   │  │  ## 개요                       │   │
│  개발팀   │  │  이 문서는...                  │   │
│  ├ 회의록 │  │                                │   │
│  ├ 가이드 │  │  ## 상세                       │   │
│  └ API   │  │  내용...                       │   │
│          │  │                                │   │
│  마케팅   │  │  [[관련문서]] 링크             │   │
│  └ 캠페인 │  │                                │   │
│          │  └────────────────────────────────┘   │
│ 🏷️ 태그   │                                          │
│  #회의록  │  우측: 목차 / 댓글 / 히스토리           │
│  #API    │                                          │
│          │                                          │
└──────────┴──────────────────────────────────────────┘
```

### 에디터 뷰:
```
┌──────────────────────────────────────────────┐
│ [B] [I] [U] [H1] [H2] [•] [1.] ["""] [🖼️]   │
├──────────────────────────────────────────────┤
│                                              │
│  # 문서 제목                                 │
│                                              │
│  마크다운으로 작성...                        │
│                                              │
│  - 리스트                                    │
│  - 아이템                                    │
│                                              │
│  ```javascript                               │
│  const code = 'syntax highlighting';         │
│  ```                                         │
│                                              │
│  [[다른 문서]] 링크                          │
│                                              │
└──────────────────────────────────────────────┘
```

---

## 7. Phase별 개발 계획

### Phase 1: 기본 문서 (3-4시간)
```
Feature 1, 4, 16
- Next.js 프로젝트 설정
- 인증 (NextAuth)
- 마크다운 에디터 (Tiptap)
- 문서 CRUD
- 폴더 구조
```

### Phase 2: 협업 기초 (2-3시간)
```
Feature 11, 12, 13
- 댓글 시스템
- 멘션 기능
- 권한 관리
- 공유 링크
```

### Phase 3: AI 기능 (2-3시간)
```
Feature 6, 7, 8, 10
- 전체 검색
- AI 태깅
- AI 요약
- AI Q&A
```

### Phase 4: 고급 기능 (2-3시간)
```
Feature 2, 3, 5, 9, 14, 15, 17, 18, 19, 20
- 실시간 협업 (Supabase)
- 버전 히스토리
- 백링크
- 유사 문서
- 알림
- 활동 피드
- 태그 시스템
- 즐겨찾기
- 브랜딩
- 다크모드
```

**총 예상 시간: 9-13시간**

---

## 8. MVP 범위 (Day 30)

### 오늘 구현할 기능 (10개):
```
✅ Feature 1: 마크다운 에디터
✅ Feature 4: 문서 템플릿 (3개)
✅ Feature 6: 전체 검색
✅ Feature 7: AI 태깅
✅ Feature 8: AI 요약
✅ Feature 11: 댓글
✅ Feature 12: 공유
✅ Feature 13: 권한
✅ Feature 16: 폴더
✅ Feature 20: 다크모드
```

### 나중에 확장 (10개):
```
- Feature 2: 실시간 협업 (복잡)
- Feature 3: 버전 히스토리
- Feature 5: 백링크
- Feature 9: 유사 문서
- Feature 10: AI Q&A
- Feature 14: 알림
- Feature 15: 활동 피드
- Feature 17: 태그
- Feature 18: 즐겨찾기
- Feature 19: 브랜딩
```

---

## 9. 제약사항

### MVP 제약:
- 1개 워크스페이스만
- 최대 10명 팀
- 최대 100개 문서
- 파일 업로드 10MB
- 실시간 협업 X (나중에)

### 추후 확장:
- 다중 워크스페이스
- 무제한 팀원
- 무제한 문서
- 대용량 파일
- 실시간 협업
- 외부 연동 (Slack/Notion)

---

## 10. 성공 기준

### MVP 완성:
✅ 회원가입/로그인
✅ 문서 생성/편집/삭제
✅ 마크다운 편집
✅ 폴더 구조
✅ 검색 작동
✅ AI 태깅
✅ AI 요약
✅ 댓글
✅ 공유
✅ 권한 관리

### 실용성:
✅ 실제 팀에서 사용 가능
✅ Notion 대체 가능 (기본 기능)
✅ 5명 팀 기준 충분
✅ 속도 빠름 (1초 이내 로딩)

---

## 11. 차별화 포인트

```
vs Notion:
✅ 더 가벼움
✅ AI 기능 기본 탑재
✅ 한국어 특화
✅ 무료

vs Confluence:
✅ 현대적 UI
✅ 간단함
✅ 빠름
✅ 개발자 친화적

vs Obsidian:
✅ 팀 협업
✅ 클라우드
✅ 실시간 동기화
✅ 권한 관리
```

---

## 12. 수익화 계획 (참고)

### Free Tier:
- 5명까지
- 100개 문서
- 기본 기능

### Pro ($10/월):
- 무제한 팀원
- 무제한 문서
- 고급 AI 기능
- 우선 지원

### Enterprise (Custom):
- 커스텀 도메인
- SSO
- 전담 지원
- SLA

---

## 13. 참고 사항

### OpenRouter API:
- Model: anthropic/claude-sonnet-4
- AI 태깅: ~1,000 tokens
- AI 요약: ~2,000 tokens
- $5로 100+ 문서 분석 가능

### Tiptap:
- React 기반 리치 에디터
- 확장 가능
- 마크다운 지원
- 협업 가능 (Yjs)

### Supabase:
- PostgreSQL 호스팅
- 실시간 기능
- 인증
- 스토리지